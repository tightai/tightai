---

title: Projects

keywords: fastai
sidebar: home_sidebar



---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 06_projects.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="BaseObject" class="doc_header"><code>class</code> <code>BaseObject</code><a href="https://github.com/tightai/tightaitightai/projects.py#L19" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>BaseObject</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="UserObject" class="doc_header"><code>class</code> <code>UserObject</code><a href="https://github.com/tightai/tightaitightai/projects.py#L53" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>UserObject</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <a href="/tightai/projects#BaseObject"><code>BaseObject</code></a></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="VersionManager" class="doc_header"><code>class</code> <code>VersionManager</code><a href="https://github.com/tightai/tightaitightai/projects.py#L58" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>VersionManager</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <a href="/tightai/lookup.py#Lookup"><code>Lookup</code></a></p>
</blockquote>
<p>API calls with headers built in</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Version" class="doc_header"><code>class</code> <code>Version</code><a href="https://github.com/tightai/tightaitightai/projects.py#L124" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Version</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <a href="/tightai/lookup.py#Lookup"><code>Lookup</code></a></p>
</blockquote>
<p>API calls with headers built in</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ProjectManager" class="doc_header"><code>class</code> <code>ProjectManager</code><a href="https://github.com/tightai/tightaitightai/projects.py#L229" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ProjectManager</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <a href="/tightai/lookup.py#Lookup"><code>Lookup</code></a></p>
</blockquote>
<p>API calls with headers built in</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Project" class="doc_header"><code>class</code> <code>Project</code><a href="https://github.com/tightai/tightaitightai/projects.py#L271" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Project</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <a href="/tightai/lookup.py#Lookup"><code>Lookup</code></a></p>
</blockquote>
<p>API calls with headers built in</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">proj</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">project_id</span><span class="o">=</span><span class="s1">&#39;news-categories&#39;</span><span class="p">)</span>
<span class="n">proj</span><span class="o">.</span><span class="n">project_id</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;news-categories&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">proj</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>name: News Categories
id: news-categories
description: 
versions_urls:
	- http://news-categories-v6.apps.tight.ml
	- http://news-categories-v5.apps.tight.ml
versions_metadata:
	deployed_count: 2
	destroyed_count: 0
	other: 5
updated: 2020-05-14T04:37:04.895133Z
timestamp: 2020-05-14T04:35:18.429311Z
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;name&#39;: &#39;News Categories&#39;,
 &#39;id&#39;: &#39;news-categories&#39;,
 &#39;description&#39;: &#39;&#39;,
 &#39;versions_urls&#39;: [&#39;http://news-categories-v6.apps.tight.ml&#39;,
  &#39;http://news-categories-v5.apps.tight.ml&#39;],
 &#39;versions_metadata&#39;: {&#39;deployed_count&#39;: 2, &#39;destroyed_count&#39;: 0, &#39;other&#39;: 5},
 &#39;updated&#39;: &#39;2020-05-14T04:37:04.895133Z&#39;,
 &#39;timestamp&#39;: &#39;2020-05-14T04:35:18.429311Z&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">proj</span><span class="o">.</span><span class="n">get_versions</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&lt;Version 99023 (news-categories)&gt;,
 &lt;Version 6 (news-categories)&gt;,
 &lt;Version 5 (news-categories)&gt;,
 &lt;Version 4 (news-categories)&gt;,
 &lt;Version 3 (news-categories)&gt;]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">recent_version</span> <span class="o">=</span> <span class="n">proj</span><span class="o">.</span><span class="n">latest</span><span class="p">()</span>
<span class="k">if</span> <span class="n">recent_version</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">recent_version</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>project_id: news-categories
version: 99023
description: None
url: None
deployed: False
deployed_timestamp: None
destroyed: False
destroyed_timestamp: None
updated: 2020-05-19T07:11:49.154710Z
timestamp: 2020-05-19T07:11:49.154681Z
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">recent_version</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>project_id: news-categories
version: 99023
description: None
url: None
deployed: False
deployed_timestamp: None
destroyed: False
destroyed_timestamp: None
updated: 2020-05-19T07:11:49.154710Z
timestamp: 2020-05-19T07:11:49.154681Z
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">Exception</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-35-d91fbfa64318&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>recent_version<span class="ansi-blue-fg">.</span>open<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-29-09a74e062544&gt;</span> in <span class="ansi-cyan-fg">open</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    164</span>         url <span class="ansi-blue-fg">=</span> details<span class="ansi-blue-fg">.</span>get<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;url&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    165</span>         <span class="ansi-green-fg">if</span> url <span class="ansi-blue-fg">==</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 166</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">raise</span> Exception<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;This version has not been deployed yet. Run `.push()` first.&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    167</span>         <span class="ansi-green-fg">return</span> webbrowser<span class="ansi-blue-fg">.</span>open<span class="ansi-blue-fg">(</span>url<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    168</span> 

<span class="ansi-red-fg">Exception</span>: This version has not been deployed yet. Run `.push()` first.</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version_c2</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">92023</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">)</span>
<span class="n">version_c2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">version_c2</span><span class="p">,</span> <span class="n">created</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">version_c2</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;deleted&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;Version 92023 (news-categories)&gt; True
Deleting is cannot be reversed. Please confirm by typing:

news-categories-v92023

news-categories-v92023
deleted
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">version_c</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">92023</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expetected Error:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">e</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">404</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Expetected Error: Not found.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">version_c</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">99023</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expetected Error:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">e</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">400</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Expetected Error: version: 99023 is already a version in news-categories
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">99023</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">)</span>
<span class="n">version</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>project_id: news-categories
version: 99023
description: None
url: None
deployed: False
deployed_timestamp: None
destroyed: False
destroyed_timestamp: None
updated: 2020-05-19T07:11:49.154710Z
timestamp: 2020-05-19T07:11:49.154681Z
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;project_id&#39;: &#39;news-categories&#39;,
 &#39;version&#39;: 99023,
 &#39;description&#39;: None,
 &#39;url&#39;: None,
 &#39;deployed&#39;: False,
 &#39;deployed_timestamp&#39;: None,
 &#39;destroyed&#39;: False,
 &#39;destroyed_timestamp&#39;: None,
 &#39;updated&#39;: &#39;2020-05-19T07:11:49.154710Z&#39;,
 &#39;timestamp&#39;: &#39;2020-05-19T07:11:49.154681Z&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">)</span>
<span class="c1"># version.refresh()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">deets</span> <span class="o">=</span> <span class="n">version</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">deets</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>project_id: news-categories
version: 6
description: 
url: None
deployed: False
deployed_timestamp: None
destroyed: False
destroyed_timestamp: 2020-05-20T21:42:19.091448Z
updated: 2020-05-20T21:45:17.077583Z
timestamp: 2020-05-19T03:49:04.389957Z
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;{&#34;project_id&#34;: &#34;news-categories&#34;, &#34;version&#34;: 6, &#34;description&#34;: &#34;&#34;, &#34;url&#34;: null, &#34;deployed&#34;: false, &#34;deployed_timestamp&#34;: null, &#34;destroyed&#34;: false, &#34;destroyed_timestamp&#34;: &#34;2020-05-20T21:42:19.091448Z&#34;, &#34;updated&#34;: &#34;2020-05-20T21:45:17.077583Z&#34;, &#34;timestamp&#34;: &#34;2020-05-19T03:49:04.389957Z&#34;}&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;/Users/jmitch/tight/my-tight-apps/jmitchel3/news-categories/&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Uploading...
requirements.txt was uploaded successfully
__init__.py was uploaded successfully
Pipfile was uploaded successfully
entry.py was uploaded successfully
using_keras.txt was uploaded successfully
data/multi.hdf5 was uploaded successfully
data/tokenizer.pkl was uploaded successfully
7 files uploaded.
Deploying...
project_id: news-categories
version: 6
description: 
url: None
deployed: False
deployed_timestamp: None
destroyed: False
destroyed_timestamp: 2020-05-20T21:42:19.091448Z
updated: 2020-05-20T21:42:50.622076Z
timestamp: 2020-05-19T03:49:04.389957Z
URL is not ready yet. Use `.status()` to check deployment status.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>project_id: news-categories
version: 6
description: 
url: None
deployed: False
deployed_timestamp: None
destroyed: False
destroyed_timestamp: 2020-05-20T21:42:19.091448Z
updated: 2020-05-20T21:42:50.622076Z
timestamp: 2020-05-19T03:49:04.389957Z
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;project_id&#39;: &#39;news-categories&#39;,
 &#39;version&#39;: 6,
 &#39;description&#39;: &#39;&#39;,
 &#39;url&#39;: None,
 &#39;deployed&#39;: False,
 &#39;deployed_timestamp&#39;: None,
 &#39;destroyed&#39;: False,
 &#39;destroyed_timestamp&#39;: &#39;2020-05-20T21:42:19.091448Z&#39;,
 &#39;updated&#39;: &#39;2020-05-20T21:42:50.622076Z&#39;,
 &#39;timestamp&#39;: &#39;2020-05-19T03:49:04.389957Z&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span><span class="o">.</span><span class="n">status</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>project_id: news-categories
version: 6
description: 
url: None
deployed: False
deployed_timestamp: None
destroyed: False
destroyed_timestamp: 2020-05-20T21:42:19.091448Z
updated: 2020-05-20T21:42:50.622076Z
timestamp: 2020-05-19T03:49:04.389957Z
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;project_id&#39;: &#39;news-categories&#39;,
 &#39;version&#39;: 6,
 &#39;description&#39;: &#39;&#39;,
 &#39;url&#39;: None,
 &#39;deployed&#39;: False,
 &#39;deployed_timestamp&#39;: None,
 &#39;destroyed&#39;: False,
 &#39;destroyed_timestamp&#39;: &#39;2020-05-20T21:42:19.091448Z&#39;,
 &#39;updated&#39;: &#39;2020-05-20T21:42:50.622076Z&#39;,
 &#39;timestamp&#39;: &#39;2020-05-19T03:49:04.389957Z&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># version.destroy()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span><span class="o">.</span><span class="n">status</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>project_id: news-categories
version: 6
description: 
url: None
deployed: False
deployed_timestamp: None
destroyed: True
destroyed_timestamp: 2020-05-20T21:42:19.091448Z
updated: 2020-05-20T21:42:19.092020Z
timestamp: 2020-05-19T03:49:04.389957Z
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;project_id&#39;: &#39;news-categories&#39;,
 &#39;version&#39;: 6,
 &#39;description&#39;: &#39;&#39;,
 &#39;url&#39;: None,
 &#39;deployed&#39;: False,
 &#39;deployed_timestamp&#39;: None,
 &#39;destroyed&#39;: True,
 &#39;destroyed_timestamp&#39;: &#39;2020-05-20T21:42:19.091448Z&#39;,
 &#39;updated&#39;: &#39;2020-05-20T21:42:19.092020Z&#39;,
 &#39;timestamp&#39;: &#39;2020-05-19T03:49:04.389957Z&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">versions</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;10&#39;</span><span class="p">,</span> <span class="n">deployed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">versions</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># import requests</span>
<span class="c1"># r = requests.post(&#39;https://www.tight.ai/api/webhooks/projects/versions/status/&#39;, data={})</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">app_name</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">news-categories-v5</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">address</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">url</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">http://news-categories-v5.apps.svc.cluster.local</span><span class="se">\&quot;</span><span class="s2">}, </span><span class="se">\&quot;</span><span class="s2">conditions</span><span class="se">\&quot;</span><span class="s2">: [{</span><span class="se">\&quot;</span><span class="s2">lastTransitionTime</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">2020-05-19T03:48:44Z</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">status</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">True</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">type</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">ConfigurationsReady</span><span class="se">\&quot;</span><span class="s2">}, {</span><span class="se">\&quot;</span><span class="s2">lastTransitionTime</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">2020-05-19T03:48:47Z</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">status</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">True</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">type</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">Ready</span><span class="se">\&quot;</span><span class="s2">}, {</span><span class="se">\&quot;</span><span class="s2">lastTransitionTime</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">2020-05-19T03:48:47Z</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">status</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">True</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">type</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">RoutesReady</span><span class="se">\&quot;</span><span class="s2">}], </span><span class="se">\&quot;</span><span class="s2">latestCreatedRevisionName</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">news-categories-v5-rk6bb</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">latestReadyRevisionName</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">news-categories-v5-rk6bb</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">observedGeneration</span><span class="se">\&quot;</span><span class="s2">: 1, </span><span class="se">\&quot;</span><span class="s2">traffic</span><span class="se">\&quot;</span><span class="s2">: [{</span><span class="se">\&quot;</span><span class="s2">latestRevision</span><span class="se">\&quot;</span><span class="s2">: true, </span><span class="se">\&quot;</span><span class="s2">percent</span><span class="se">\&quot;</span><span class="s2">: 100, </span><span class="se">\&quot;</span><span class="s2">revisionName</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">news-categories-v5-rk6bb</span><span class="se">\&quot;</span><span class="s2">}], </span><span class="se">\&quot;</span><span class="s2">url</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">http://news-categories-v5.apps.tight.ml</span><span class="se">\&quot;</span><span class="s2">}&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">b</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;http://127.0.0.1:8123/status&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;project_id&#39;</span><span class="p">:</span> <span class="s2">&quot;news-categories&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;6&quot;</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;app_name&#39;: &#39;news-categories-v6&#39;,
 &#39;project_id&#39;: &#39;news-categories&#39;,
 &#39;version&#39;: 6,
 &#39;url&#39;: &#39;http://news-categories-v6.apps.tight.ml&#39;,
 &#39;status_code&#39;: 200,
 &#39;cluster_url&#39;: &#39;http://news-categories-v6.apps.svc.cluster.local&#39;,
 &#39;ready&#39;: True,
 &#39;ready_time&#39;: &#39;2020-05-19T03:52:20Z&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;http://127.0.0.1:8123/live/status/news-categories/v5&quot;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">traffic_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">][</span><span class="s1">&#39;traffic&#39;</span><span class="p">]</span>
<span class="n">traffic_data</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">traffic_data</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;percent&#39;</span><span class="p">])</span>
<span class="n">traffic_data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ready</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">][</span><span class="s1">&#39;conditions&#39;</span><span class="p">]:</span>
    <span class="n">_cond_ready</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span>
    <span class="n">ready</span> <span class="o">=</span> <span class="n">_cond_ready</span>
<span class="n">ready</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">sorted</span><span class="p">(</span><span class="n">traffic_data</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;percent&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

