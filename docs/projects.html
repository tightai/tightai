---

title: Projects

keywords: fastai
sidebar: home_sidebar



---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 06_projects.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="BaseObject" class="doc_header"><code>class</code> <code>BaseObject</code><a href="https://github.com/tightai/tightaitightai/projects.py#L22" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>BaseObject</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="UserObject" class="doc_header"><code>class</code> <code>UserObject</code><a href="https://github.com/tightai/tightaitightai/projects.py#L47" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>UserObject</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <a href="/tightai/projects#BaseObject"><code>BaseObject</code></a></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="VersionManager" class="doc_header"><code>class</code> <code>VersionManager</code><a href="https://github.com/tightai/tightaitightai/projects.py#L52" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>VersionManager</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <a href="/tightai/lookup.py#Lookup"><code>Lookup</code></a></p>
</blockquote>
<p>API calls with headers built in</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Version" class="doc_header"><code>class</code> <code>Version</code><a href="https://github.com/tightai/tightaitightai/projects.py#L118" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Version</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <a href="/tightai/lookup.py#Lookup"><code>Lookup</code></a></p>
</blockquote>
<p>API calls with headers built in</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ProjectManager" class="doc_header"><code>class</code> <code>ProjectManager</code><a href="https://github.com/tightai/tightaitightai/projects.py#L244" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ProjectManager</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <a href="/tightai/lookup.py#Lookup"><code>Lookup</code></a></p>
</blockquote>
<p>API calls with headers built in</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Project" class="doc_header"><code>class</code> <code>Project</code><a href="https://github.com/tightai/tightaitightai/projects.py#L286" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Project</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <a href="/tightai/lookup.py#Lookup"><code>Lookup</code></a></p>
</blockquote>
<p>API calls with headers built in</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">proj</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">project_id</span><span class="o">=</span><span class="s1">&#39;news-categories&#39;</span><span class="p">)</span>
<span class="n">proj</span><span class="o">.</span><span class="n">project_id</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;news-categories&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">proj</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;name&#39;: &#39;News Categories&#39;,
 &#39;project_id&#39;: &#39;news-categories&#39;,
 &#39;versions_summary&#39;: {&#39;deployed&#39;: 1,
  &#39;urls&#39;: [&#39;http://news-categories-v5.apps.tight.ml&#39;]},
 &#39;updated&#39;: &#39;2020-05-14T04:37:04.895133Z&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">proj</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>name: News Categories
id: news-categories
owner:
username: jmitchel3
first_name: 
last_name: 
date_joined: 2020-05-11T20:35:48.716644Z
description: 
versions_urls:
	- http://news-categories-v5.apps.tight.ml
versions_metadata:
deployed_count: 1
destroyed_count: 0
other: 6
updated: 2020-05-14T04:37:04.895133Z
timestamp: 2020-05-14T04:35:18.429311Z
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;name&#39;: &#39;News Categories&#39;,
 &#39;id&#39;: &#39;news-categories&#39;,
 &#39;description&#39;: &#39;&#39;,
 &#39;versions_urls&#39;: [&#39;http://news-categories-v5.apps.tight.ml&#39;],
 &#39;versions_metadata&#39;: {&#39;deployed_count&#39;: 1, &#39;destroyed_count&#39;: 0, &#39;other&#39;: 6},
 &#39;updated&#39;: &#39;2020-05-14T04:37:04.895133Z&#39;,
 &#39;timestamp&#39;: &#39;2020-05-14T04:35:18.429311Z&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">proj</span><span class="o">.</span><span class="n">get_versions</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">recent_version</span> <span class="o">=</span> <span class="n">proj</span><span class="o">.</span><span class="n">latest</span><span class="p">()</span>
<span class="k">if</span> <span class="n">recent_version</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">recent_version</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">recent_version</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">recent_version</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version_c2</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">92023</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">)</span>
<span class="n">version_c2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">version_c2</span><span class="p">,</span> <span class="n">created</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">version_c2</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;deleted&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">version_c</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">92023</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expetected Error:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">e</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">404</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">version_c</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">99023</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expetected Error:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">e</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">400</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">99023</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">)</span>
<span class="n">version</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">)</span>
<span class="c1"># version.refresh()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">deets</span> <span class="o">=</span> <span class="n">version</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">deets</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>project_id: news-categories
version: 6
description: 
url: None
status_msg: Unknown status. Please try again.
build_started: True
build_start_timestamp: 2020-05-20T21:42:50.716189Z
build_complete: True
build_complete_timestamp: 2020-05-20T21:45:17.077165Z
trigger_active: False
trigger: build_and_deploy
deployed: False
deployed_timestamp: None
destroyed: False
destroyed_timestamp: 2020-05-20T21:42:19.091448Z
updated: 2020-05-20T21:45:17.077583Z
timestamp: 2020-05-19T03:49:04.389957Z
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;{&#34;project_id&#34;: &#34;news-categories&#34;, &#34;version&#34;: 6, &#34;description&#34;: &#34;&#34;, &#34;url&#34;: null, &#34;deployed&#34;: false, &#34;deployed_timestamp&#34;: null, &#34;destroyed&#34;: false, &#34;destroyed_timestamp&#34;: &#34;2020-05-20T21:42:19.091448Z&#34;, &#34;updated&#34;: &#34;2020-05-20T21:45:17.077583Z&#34;, &#34;timestamp&#34;: &#34;2020-05-19T03:49:04.389957Z&#34;}&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;/Users/jmitch/tight/my-tight-apps/local_dev/&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Uploading...
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">RequestError</span>                              Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-13-641aa779ef27&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>version<span class="ansi-blue-fg">.</span>push<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;/Users/jmitch/tight/my-tight-apps/local_dev/&#34;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-5-41adde96273a&gt;</span> in <span class="ansi-cyan-fg">push</span><span class="ansi-blue-fg">(self, path, check_status)</span>
<span class="ansi-green-intense-fg ansi-bold">    134</span>         project_id <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>project_id
<span class="ansi-green-intense-fg ansi-bold">    135</span>         version <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>version
<span class="ansi-green-fg">--&gt; 136</span><span class="ansi-red-fg">         </span>uploaded_count <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>upload<span class="ansi-blue-fg">(</span>path<span class="ansi-blue-fg">,</span> verbose<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    137</span>         <span class="ansi-green-fg">if</span> uploaded_count <span class="ansi-blue-fg">==</span> <span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    138</span>             print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">f&#34;Uploaded 0 files. Continuing&#34;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-5-41adde96273a&gt;</span> in <span class="ansi-cyan-fg">upload</span><span class="ansi-blue-fg">(self, path, verbose)</span>
<span class="ansi-green-intense-fg ansi-bold">    112</span>     <span class="ansi-green-fg">def</span> upload<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> path<span class="ansi-blue-fg">,</span> verbose<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    113</span>         uploader <span class="ansi-blue-fg">=</span> Uploader<span class="ansi-blue-fg">(</span>path<span class="ansi-blue-fg">=</span>path<span class="ansi-blue-fg">,</span> project_id<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>project_id<span class="ansi-blue-fg">,</span> version<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>version<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 114</span><span class="ansi-red-fg">         </span>uploaded_count <span class="ansi-blue-fg">=</span> uploader<span class="ansi-blue-fg">.</span>upload<span class="ansi-blue-fg">(</span>verbose<span class="ansi-blue-fg">=</span>verbose<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    115</span>         <span class="ansi-green-fg">return</span> uploaded_count
<span class="ansi-green-intense-fg ansi-bold">    116</span> 

<span class="ansi-green-fg">~/Tight/tightai/tightai/upload.py</span> in <span class="ansi-cyan-fg">upload</span><span class="ansi-blue-fg">(self, verbose, dry_run, dry_sign)</span>
<span class="ansi-green-intense-fg ansi-bold">     91</span>             <span class="ansi-red-fg"># sign_r = requests.post(self.endpoint, json=data)</span>
<span class="ansi-green-intense-fg ansi-bold">     92</span>             sign_r <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>http_post<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>endpoint<span class="ansi-blue-fg">,</span> data<span class="ansi-blue-fg">=</span>data<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 93</span><span class="ansi-red-fg">             </span>self<span class="ansi-blue-fg">.</span>handle_invalid_lookup<span class="ansi-blue-fg">(</span>sign_r<span class="ansi-blue-fg">,</span> expected_status_code<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">200</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     94</span>             signed_response <span class="ansi-blue-fg">=</span> sign_r<span class="ansi-blue-fg">.</span>json<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     95</span>             keys <span class="ansi-blue-fg">=</span> list<span class="ansi-blue-fg">(</span>signed_response<span class="ansi-blue-fg">.</span>keys<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/Tight/tightai/tightai/lookup.py</span> in <span class="ansi-cyan-fg">handle_invalid_lookup</span><span class="ansi-blue-fg">(self, response, expected_status_code)</span>
<span class="ansi-green-intense-fg ansi-bold">     86</span>             <span class="ansi-green-fg">if</span> isinstance<span class="ansi-blue-fg">(</span>msg<span class="ansi-blue-fg">,</span> list<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     87</span>                 msg <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">&#34;, &#34;</span><span class="ansi-blue-fg">.</span>join<span class="ansi-blue-fg">(</span>msg<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 88</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">raise</span> RequestError<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">f&#34;{msg}&#34;</span><span class="ansi-blue-fg">,</span> status<span class="ansi-blue-fg">=</span>r<span class="ansi-blue-fg">.</span>status_code<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">RequestError</span>: &#39;\n&lt;!doctype html&gt;\n&lt;html lang=&#34;en&#34;&gt;\n&lt;head&gt;\n  &lt;title&gt;Bad Request (400)&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;h1&gt;Bad Request (400)&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n (status 400)&#39;</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span><span class="o">.</span><span class="n">status</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># version.destroy()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">version</span><span class="o">.</span><span class="n">status</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">versions</span> <span class="o">=</span> <span class="n">Version</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">project_id</span><span class="o">=</span><span class="s2">&quot;news-categories&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;10&#39;</span><span class="p">,</span> <span class="n">deployed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">versions</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># import requests</span>
<span class="c1"># r = requests.post(&#39;https://www.tight.ai/api/webhooks/projects/versions/status/&#39;, data={})</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">app_name</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">news-categories-v5</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">address</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">url</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">http://news-categories-v5.apps.svc.cluster.local</span><span class="se">\&quot;</span><span class="s2">}, </span><span class="se">\&quot;</span><span class="s2">conditions</span><span class="se">\&quot;</span><span class="s2">: [{</span><span class="se">\&quot;</span><span class="s2">lastTransitionTime</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">2020-05-19T03:48:44Z</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">status</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">True</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">type</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">ConfigurationsReady</span><span class="se">\&quot;</span><span class="s2">}, {</span><span class="se">\&quot;</span><span class="s2">lastTransitionTime</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">2020-05-19T03:48:47Z</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">status</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">True</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">type</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">Ready</span><span class="se">\&quot;</span><span class="s2">}, {</span><span class="se">\&quot;</span><span class="s2">lastTransitionTime</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">2020-05-19T03:48:47Z</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">status</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">True</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">type</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">RoutesReady</span><span class="se">\&quot;</span><span class="s2">}], </span><span class="se">\&quot;</span><span class="s2">latestCreatedRevisionName</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">news-categories-v5-rk6bb</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">latestReadyRevisionName</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">news-categories-v5-rk6bb</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">observedGeneration</span><span class="se">\&quot;</span><span class="s2">: 1, </span><span class="se">\&quot;</span><span class="s2">traffic</span><span class="se">\&quot;</span><span class="s2">: [{</span><span class="se">\&quot;</span><span class="s2">latestRevision</span><span class="se">\&quot;</span><span class="s2">: true, </span><span class="se">\&quot;</span><span class="s2">percent</span><span class="se">\&quot;</span><span class="s2">: 100, </span><span class="se">\&quot;</span><span class="s2">revisionName</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">news-categories-v5-rk6bb</span><span class="se">\&quot;</span><span class="s2">}], </span><span class="se">\&quot;</span><span class="s2">url</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">http://news-categories-v5.apps.tight.ml</span><span class="se">\&quot;</span><span class="s2">}&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">b</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;http://127.0.0.1:8123/status&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;project_id&#39;</span><span class="p">:</span> <span class="s2">&quot;news-categories&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;6&quot;</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;http://127.0.0.1:8123/live/status/news-categories/v5&quot;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">traffic_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">][</span><span class="s1">&#39;traffic&#39;</span><span class="p">]</span>
<span class="n">traffic_data</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">traffic_data</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;percent&#39;</span><span class="p">])</span>
<span class="n">traffic_data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ready</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">][</span><span class="s1">&#39;conditions&#39;</span><span class="p">]:</span>
    <span class="n">_cond_ready</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span>
    <span class="n">ready</span> <span class="o">=</span> <span class="n">_cond_ready</span>
<span class="n">ready</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">sorted</span><span class="p">(</span><span class="n">traffic_data</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;percent&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

